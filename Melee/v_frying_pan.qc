// Created by MrFunreal.

// Note: I would HEAVILY reccomend you to move the $model line to the very bottom of the entire qc file.
// This will make sure the ref pose generated by $UnlockDefineBones will not be looking weird.

	$ModelName "Weapons/melee/v_frying_pan.mdl"
//	$ModelName !/TEMP 						//HLMV will only load custom models if the modelname is unique. Which is that this is for.

$Model Body		CustomMeshHere				//This is the model you're compiling. Will pick DMX over SMD, if both file types exist.
$CDMaterials	"Models/Weapons/Whatever" 	//This is the subfolder of "materials" where your materials and textures will be. Change it to whatever you want.

$Attachment "attach_shell_eject" "ValveBiped.attach_shell_eject" 0 0 0 rotate 0 0 0
$Attachment "attach_muzzle" "ValveBiped.attach_muzzle" 0 0 0 rotate 0 0 0
$Attachment "attach_blur" "ValveBiped.weapon_bone" 0.69 11.8 -0.09 rotate 64.44 -90 -90
$Attachment "attach_camera" "ValveBiped.attach_camera" 0 0 0 rotate 0 0 0

// You shouldn't edit anthing in this little box
//--------------------------------------------------------------------------------------
$SurfaceProp "default"
$Contents "solid"
$IllumPosition 1.43 -7.221 -24.351
$MostlyOpaque // Or $Opaque
$CBox 0 0 0 0 0 0
$BBox -20.713 -19.055 -58 35.154 21.915 9.297
//--------------------------------------------------------------------------------------

$UnlockDefineBones
$include "Bones.qci" //Make sure to also copy the bones.qci to whatever folder you're using this qc in.

//--------------------------------------------------------------------------------------
// Removed Knee lines, cause the compiler creates its own.
// // IT'S UP TO YOU TO ADD PROPER IKRULES WHERE REQUIRED IN ALL $SEQUENCES!
// I've added basic ikrules to most sequences. But use your own brain to figure out if it's the way you want it!
$IKChain "lhand" "ValveBiped.Bip01_L_Hand"
$IKChain "rhand" "ValveBiped.Bip01_R_Hand"

$PoseParameter "ver_aims" -1 1 loop 0
$PoseParameter "move_x" -1 1 loop 0

// $ANIMATIONS - Make sure the actual animation names are as described in this qc!
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$Animation a_idle				anims/idle 			loop ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource
$Animation a_look_down			anims/lookpose		frames 0 0 subtract a_idle  0
$Animation a_look_mid			anims/lookpose		frames 1 1 subtract a_idle  0
$Animation a_look_up			anims/lookpose		frames 2 2 subtract a_idle  0
$Animation a_run				anims/run			loop
// Swinghard animations are not used in L4D2. But mods can unlock them. You might want to animate them anyways. Who knows.
// Secondary_Swing is the "push back" animation to stumble the CI.

// Once you set all the following $Animation's up (including the helping hands), Duplicate them and change the suffix from A_ to AL_.
// So you'll have two animation blocks identical, except for the prefix. Like A_Deploy and AL_Depoloy.
$Animation a_deploy				deploy				FPS 30
$Animation a_swing_01			swing_01			FPS 30
$Animation a_swing_02			swing_02			FPS 26
$Animation a_secondary_swing_02	secondary_swing_02	FPS 30
$Animation a_strong_swing		strong_swing		FPS 30

$Animation a_hh_ext				anims/hh_ext		FPS 30 frames  0 19	//first frames of this anim.	//	"Helping Hand" and "Item Extend" could be the same pose. Makes animating quicker.
$Animation a_hh_ret				anims/hh_ext		FPS 30 frames 19 38	//last frames of this anim.     //	They're two animations files each. One is "Extend" and immediately "Retract",
$Animation a_hh_idle			anims/hh_idle		FPS 30 loop                                         //	while the other is "extended hand looping".
$Animation a_it_ext				anims/it_ext		FPS 30 frames  0 19 //first frames of this anim.    //	The Extend/Retract animation is split up using "Frames X Y". It's easier like that
$Animation a_it_ret				anims/it_ext		FPS 30 frames 19 38	//last frames of this anim.     //
$Animation a_it_idle			anims/it_idle		FPS 30 loop                                         //

// $SEQUENCES
// Edit Fadein/Fadeout and animation events if you want.
// All sequences using activity ACT_VM_HITLEFT, HITCENTER, HITRIGHT are both the "timer" and the "visible" sequence. Making their _Layer counterpart useless.
// These now useless _layers are marked with "HIDDEN //!". The other Hidden sequences are the non_layers you don't need to see in HLMV. (Except for lookpose)
// I took the liberty to add "Subtract a_idle 0 Delta" to every visible $sequence to make blending happen. Delete where you don't want it.
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$Sequence "idle2"						"a_idle"																			Hidden //Unused
$Sequence "deploy"						"a_deploy"									"ACT_VM_DRAW" 1									Snap		Fadeout 0.2 Subtract a_idle 0 Delta	{ event 5004 1 "Pan.Deploy" }					                                                        ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource
$Sequence "aims"						"a_look_down" "a_look_mid" "a_look_up"												Hidden	Blend "ver_aims" 1 -1	blendwidth 3	Delta
$Sequence "idle01"						"a_run" "a_idle" "a_run"					"ACT_VM_IDLE" 1									Blend "move_x" -1 1		blendwidth 3	Loop	AddLayer "aims"
$Sequence "swing_01"					"a_swing_01"								"ACT_VM_PRIMARYATTACK" 1				Hidden
$Sequence "swing_layer_01"				"al_swing_01"								"ACT_VM_SHOOT_LAYER" 1							Fadein 0.2	Fadeout 0.2 Subtract a_idle 0 Delta	{ event AE_CL_CREATE_PARTICLE_EFFECT 6 "weapon_melee_blur_frying_pan follow_attachment attach_blur" }	ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource
$Sequence "swing_02"					"a_swing_02"								"ACT_VM_HITLEFT" 1								Fadein 0 	Fadeout 0.2 Subtract a_idle 0 Delta	{ event AE_CL_CREATE_PARTICLE_EFFECT 4 "weapon_melee_blur_frying_pan follow_attachment attach_blur" }	ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource
$Sequence "swing_layer_02"				"al_swing_02"								"ACT_VM_HITLEFT_LAYER" 1				HIDDEN //!
$Sequence "secondary_swing_02"			"a_secondary_swing_02"						"ACT_VM_SECONDARYATTACK" 1				Hidden
$Sequence "secondary_swing_layer_01"	"al_secondary_swing_02"						"ACT_VM_SECONDARYATTACK_LAYER" 1				Fadein 0.2	Fadeout 0.2 Subtract a_idle 0 Delta	                                                                                                        ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource
$Sequence "strong_swing"				"a_strong_swing"							"ACT_VM_SWINGHARD" 1					Hidden
$Sequence "strong_swing_layer_01"		"al_strong_swing"							"ACT_VM_SWINGHARD_LAYER" 1						Fadein 0.2	Fadeout 0.2 Subtract a_idle 0 Delta	                                                                                                        ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource

//Extending Hands Begin
$Sequence "helping_hand_extend" 		 a_hh_ext	Fadein 0.2 	Fadeout 0 			"ACT_VM_HELPINGHAND_EXTEND" 1			Hidden
$Sequence "helping_hand_extend_layer" 	al_hh_ext	Fadein 0.2 	Fadeout 0 	        "ACT_VM_HELPINGHAND_EXTEND_LAYER" 1
$Sequence "helping_hand_loop" 			 a_hh_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_HELPINGHAND_LOOP" 1				Hidden
$Sequence "helping_hand_loop_layer" 	al_hh_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_HELPINGHAND_LOOP_LAYER" 1
$Sequence "helping_hand_retract" 		 a_hh_ret	Fadein 0 	Fadeout 0.2         "ACT_VM_HELPINGHAND_RETRACT" 1			Hidden
$Sequence "helping_hand_retract_layer" 	al_hh_ret	Fadein 0 	Fadeout 0.2         "ACT_VM_HELPINGHAND_RETRACT_LAYER" 1
$Sequence "item_extend" 				 a_it_ext	Fadein 0.2 	Fadeout 0 	        "ACT_VM_ITEMPICKUP_EXTEND" 1			Hidden
$Sequence "item_extend_layer" 			al_it_ext	Fadein 0.2 	Fadeout 0 	        "ACT_VM_ITEMPICKUP_EXTEND_LAYER" 1
$Sequence "item_loop"  					 a_it_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_ITEMPICKUP_LOOP" 1 				Hidden
$Sequence "item_loop_layer"  			al_it_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_ITEMPICKUP_LOOP_LAYER" 1
$Sequence "item_retract"  				 a_it_ret	Fadein 0 	Fadeout 0.2         "ACT_VM_ITEMPICKUP_RETRACT" 1 			Hidden
$Sequence "item_retract_layer"  		al_it_ret	Fadein 0	Fadeout 0.2         "ACT_VM_ITEMPICKUP_RETRACT_LAYER" 1
//Extending Hands End

//You can add new $SEQUENCES below here. But they'll be buggy when you play online.