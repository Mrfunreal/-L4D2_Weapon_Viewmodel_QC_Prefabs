// Created by MrFunreal. 

// Note: I would HEAVILY reccomend you to move the $model line to the very bottom of the entire qc file.
// This will make sure the ref pose generated by $UnlockDefineBones will not be looking weird.

	$ModelName "v_models/v_medkit.mdl"
//	$ModelName !/TEMP 						//HLMV will only load custom models if the modelname is unique. Which is that this is for.

$Model Body		CustomMeshHere				//This is the model you're compiling. Will pick DMX over SMD, if both file types exist.
$CDMaterials	"Models/Weapons/Whatever" 	//This is the subfolder of "materials" where your materials and textures will be. Change it to whatever you want.

// You shouldn't edit anthing in this little box
//--------------------------------------------------------------------------------------
$SurfaceProp "default"
$Contents "solid"
$IllumPosition -4.698 -10.815 -30.303
$MostlyOpaque // Or $Opaque
$CBox 0 0 0 0 0 0
$BBox -4.377 -13.929 -64.5 26.007 4.532 3.894
//--------------------------------------------------------------------------------------

$UnlockDefineBones
$include "Bones.qci" //Make sure to also copy the bones.qci to whatever folder you're using this qc in.

//These definebone lines exist because this model uses them by default. If you don't want these bones, delete these lines.
$DefineBone "ValveBiped.left_strap" "ValveBiped.weapon_bone" 0.364024 4.323628 -0.156231 -84.463089 -50.479698 -40.118014 0 0 0 0 0 0
$DefineBone "ValveBiped.center_strap" "ValveBiped.weapon_bone" 2.305805 1.421825 -0.175137 -84.462946 -50.479869 -40.117768 0 0 0 0 0 0
$DefineBone "ValveBiped.right_strap" "ValveBiped.weapon_bone" 0.200276 -4.476107 0.032715 -84.462946 -50.479869 -40.117768 0 0 0 0 0 0
$DefineBone "ValveBiped.left_zipper" "ValveBiped.weapon_bone" 2.419862 3.115832 2.023037 74.413258 95.254207 173.527431 0 0 0 0 0 0
$DefineBone "ValveBiped.right_zipper" "ValveBiped.weapon_bone" 2.170063 3.117817 -2.30122 79.663201 125.90742 -150.390561 0 0 0 0 0 0

//--------------------------------------------------------------------------------------
// Removed Knee lines, cause the compiler creates its own.
// IT'S UP TO YOU TO ADD PROPER IKRULES WHERE REQUIRED IN ALL $SEQUENCES!
// I've added basic ikrules to most sequences. But use your own brain to figure out if it's the way you want it!
$IKChain "lhand" "ValveBiped.Bip01_L_Hand"
$IKChain "rhand" "ValveBiped.Bip01_R_Hand"

$PoseParameter "ver_aims" -1 1 loop 0
$PoseParameter "move_x" -1 1 loop 0

// $ANIMATIONS - Make sure the actual animation names are as described in this qc!
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$animation a_idle		anims/idle 		loop ikrule rhand touch weapon usesource ikrule lhand touch weapon usesource
$animation a_look_down	anims/lookpose	frames 0 0 subtract a_idle  0
$animation a_look_mid	anims/lookpose	frames 1 1 subtract a_idle  0
$animation a_look_up	anims/lookpose	frames 2 2 subtract a_idle  0
$animation a_run		anims/run.smd	loop

// Once you set all the following $Animation's up (including the helping hands), Duplicate them and change the prefix from A_ to AL_.
// So you'll have two animation blocks identical, except for the prefix. Like A_Deploy and AL_Depoloy.
$animation a_deploy		anims/deploy 	fps 30
$animation a_melee		anims/melee		fps 30

$animation a_hh_ext		anims/hh_ext	fps 30 frames 0 20 	//first 20 frames of this anim.	//	"Helping Hand" and "Item Extend" could be the same pose. Makes animating quicker.
$animation a_hh_ret		anims/hh_ext	fps 30 frames 20 40	//last 20 frames of this anim.  //	They're two animations files each. One is "Extend" and immediately "Retract",
$animation a_hh_idle	anims/hh_idle	fps 30 loop                                         //	while the other is "extended hand looping".
$animation a_it_ext		anims/it_ext	fps 30 frames 0 20 //first 20 frames of this anim.  //	The Extend/Retract animation is split up using "Frames X Y". It's easier like that
$animation a_it_ret		anims/it_ext	fps 30 frames 20 40	//last 20 frames of this anim.  //
$animation a_it_idle	anims/it_idle	fps 30 loop                                         //

// $SEQUENCES
// Edit Fadein/Fadeout and animation events if you want.
// All Hidden sequences are the non_layers you don't need to see in HLMV. (Except for lookpose)
// I took the liberty to add "Subtract a_idle 0 Delta" to every visible $sequence to make blending happen. Delete where you don't want it.
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$Sequence "look_poses"		a_look_down a_look_mid a_look_up 										Hidden	blend "ver_aims" 1 -1	blendwidth 3 delta
$Sequence "idle_raw" 		a_idle																	Hidden
$Sequence "idle"			a_run a_idle a_run					"ACT_VM_IDLE" 1								blend "move_x" -1 1		blendwidth 3 addlayer "look_poses" loop
$Sequence "deploy"  		a_deploy							"ACT_VM_DEPLOY" 1 					Hidden
$Sequence "deploy_layer"  	al_deploy							"ACT_VM_DEPLOY_LAYER" 1						snap 		fadeout 0.2 subtract a_idle 0 delta ikrule rhand touch weapon usesource ikrule lhand touch weapon usesource
$Sequence "melee"  			a_melee								"ACT_VM_MELEE" 1 					Hidden
$Sequence "melee_layer"  	al_melee							"ACT_VM_MELEE_LAYER" 1						fadein 0.2 	fadeout 0.2 subtract a_idle 0 delta ikrule rhand touch weapon usesource ikrule lhand touch weapon usesource
//Extending Hands Begin
$Sequence "helping_hand_extend" 		 a_hh_ext				"ACT_VM_HELPINGHAND_EXTEND" 1		Hidden
$Sequence "helping_hand_extend_layer" 	al_hh_ext				"ACT_VM_HELPINGHAND_EXTEND_LAYER" 1			fadein 0.2 	fadeout 0
$Sequence "helping_hand_loop" 			 a_hh_idle				"ACT_VM_HELPINGHAND_LOOP" 1 		Hidden
$Sequence "helping_hand_loop_layer"		al_hh_idle				"ACT_VM_HELPINGHAND_LOOP_LAYER" 1			fadein 0.2 	fadeout 0.2 loop
$Sequence "helping_hand_retract"		 a_hh_ret				"ACT_VM_HELPINGHAND_RETRACT" 1		Hidden
$Sequence "helping_hand_retract_layer" 	al_hh_ret				"ACT_VM_HELPINGHAND_RETRACT_LAYER" 1		fadein 0 	fadeout 0.2
$Sequence "itempickup_extendr" 			 a_it_ext				"ACT_VM_ITEMPICKUP_EXTEND" 1 		Hidden
$Sequence "itempickup_extend_layer" 	al_it_ext				"ACT_VM_ITEMPICKUP_EXTEND_LAYER" 1			fadein 0.2 	fadeout 0
$Sequence "itempickup_loop" 			 a_it_idle				"ACT_VM_ITEMPICKUP_LOOP" 1 			Hidden
$Sequence "itempickup_loop_layer" 		al_it_idle				"ACT_VM_ITEMPICKUP_LOOP_LAYER" 1			fadein 0.2 	fadeout 0.2 loop
$Sequence "itempickup_retract" 			 a_it_ret				"ACT_VM_ITEMPICKUP_RETRACT_" 1		Hidden
$Sequence "itempickup_retract_layer" 	al_it_ret				"ACT_VM_ITEMPICKUP_RETRACT_LAYER" 1			fadein 0	fadeout 0.2
//Extending Hands End
//You can add new $SEQUENCES below here. But they'll be buggy when you play online.