// Created by MrFunreal. 

	$ModelName "props_junk\explosive_box001.mdl"
//	$ModelName !/TEMP 						//HLMV will only load custom models if the modelname is unique. Which is that this is for.

// Note: I would HEAVILY reccomend you to move the $model line to the very bottom of the entire qc file.
// This will make sure the ref pose generated by $UnlockDefineBones will not be looking weird.

$Model Body		CustomMeshHere				//This is the model you're compiling. Will pick DMX over SMD, if both file types exist.
$CDMaterials	"Models/Weapons/Whatever" 	//This is the subfolder of "materials" where your materials and textures will be. Change it to whatever you want.

// You shouldn't edit anthing in this little box
//--------------------------------------------------------------------------------------
$SurfaceProp "wood.fireworkCrate"
$Contents "solid"
$IllumPosition -0.001 0.024 0.017
$MostlyOpaque // Or $Opaque
$CBox 0 0 0 0 0 0
$BBox -10.731 -6.888 -2.952 10.729 7.125 2.949
//--------------------------------------------------------------------------------------

$UnlockDefineBones
$include "Bones.qci" //Make sure to also copy the bones.qci to whatever folder you're using this qc in.

//--------------------------------------------------------------------------------------
// Removed Knee lines, cause the compiler creates its own.
// IT'S UP TO YOU TO ADD PROPER IKRULES WHERE REQUIRED IN ALL $SEQUENCES!
// I've added basic ikrules to most sequences. But use your own brain to figure out if it's the way you want it!
$IKChain "lhand" "ValveBiped.Bip01_L_Hand"
$IKChain "rhand" "ValveBiped.Bip01_R_Hand"

$PoseParameter "ver_aims" -1 1 loop 0
$PoseParameter "move_x" -1 1 loop 0

// $ANIMATIONS - Make sure the actual animation names are as described in this qc!
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$Animation w_idle		anims/w_idle	//This is the worldmodel animation. Make sure yours is the SAME position as retail!

$Animation a_idle		anims/idle 		loop ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource
$Animation a_look_down	anims/lookpose	frames 0 0 subtract a_idle  0
$Animation a_look_mid	anims/lookpose	frames 1 1 subtract a_idle  0
$Animation a_look_up	anims/lookpose	frames 2 2 subtract a_idle  0
$Animation a_run		anims/run		loop

// Once you set the FPS or other stuff in all the following $animation lines below, make of copy of them and change the prefix of the copy from A_ to AL_!
// That way your non_layer and _layer sequences will have the same settings, while also preventing a nasty bug from appearing.
// I could have set these up for you beforehand, but i myself always edit the FPS, so i would always need to edit two lines for that. Just duping and renaming is quicker.
$Animation a_deploy		anims/deploy	FPS 30
$Animation a_melee		anims/melee		FPS 30

//	Carryables have no helping hand anims. You could add them, but it will look weird for your friends when you host with a mod that has em.
//	Something to do with trying to play anims that don't exist for the others.
//	I'll add them here anyways in case you want to use it. Uncomment the $sequences below aswell.
//	$Animation a_hh_ext		anims/hh_ext	FPS 30 frames  0 20	//first frames of this anim.	//	"Helping Hand" and "Item Extend" could be the same pose. Makes animating quicker.
//	$Animation a_hh_ret		anims/hh_ext	FPS 30 frames 20 40	//last frames of this anim.     //	They're two animations files each. One is "Extend" and immediately "Retract",
//	$Animation a_hh_idle	anims/hh_idle	FPS 30 loop                                         //	while the other is "extended hand looping".
//	$Animation a_it_ext		anims/it_ext	FPS 30 frames  0 20 //first frames of this anim.    //	The Extend/Retract animation is split up using "Frames X Y". It's easier like that
//	$Animation a_it_ret		anims/it_ext	FPS 30 frames 20 40	//last frames of this anim.     //
//	$Animation a_it_idle	anims/it_idle	FPS 30 loop                                         //

// $SEQUENCES
// Edit Fadein/Fadeout and animation events if you want.
// The Hidden sequences are the non_layers you don't need to see in HLMV. (Except for lookpose)
// I took the liberty to add "Subtract a_idle 0 Delta" to every visible $sequence to make blending happen. Delete where you don't want it.
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$Sequence "idle" w_idle
$Sequence "a_gasCan_vaims"	"a_look_down" "a_look_mid" "a_look_up"								Hidden	Blend "ver_aims" 1 -1	blendwidth 3	Delta
$Sequence "gasCan_idle"		"a_run" "a_idle" "a_run"				"ACT_VM_IDLE_GASCAN" 1				Blend "move_x" -1 1		blendwidth 3	Loop	AddLayer "a_gasCan_vaims"
$Sequence "deploy"			a_deploy								"ACT_VM_DEPLOY_GASCAN" 1			Snap		Fadeout 0.2	Subtract a_idle 0 Delta	ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource
$Sequence "pullpin"			a_look_mid								"ACT_VM_PULLPIN_GASCAN" 1	Hidden	//Unused
$Sequence "throw"			a_look_mid								"ACT_VM_THROW_GASCAN" 1		Hidden	//Unused
$Sequence "melee"			a_melee									"ACT_VM_MELEE_GASCAN" 1				Fadein 0.2	Fadeout 0.2	Subtract a_idle 0 Delta	ikrule rhand touch Weapon usesource ikrule lhand touch Weapon usesource

//Extending Hands Begin
//	$Sequence "helping_hand_extend" 		 a_hh_ext	Fadein 0.2 	Fadeout 0 			"ACT_VM_HELPINGHAND_EXTEND" 1			Hidden
//	$Sequence "helping_hand_extend_layer" 	al_hh_ext	Fadein 0.2 	Fadeout 0 	        "ACT_VM_HELPINGHAND_EXTEND_LAYER" 1
//	$Sequence "helping_hand_loop" 			 a_hh_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_HELPINGHAND_LOOP" 1				Hidden
//	$Sequence "helping_hand_loop_layer" 	al_hh_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_HELPINGHAND_LOOP_LAYER" 1
//	$Sequence "helping_hand_retract" 		 a_hh_ret	Fadein 0 	Fadeout 0.2         "ACT_VM_HELPINGHAND_RETRACT" 1			Hidden
//	$Sequence "helping_hand_retract_layer" 	al_hh_ret	Fadein 0 	Fadeout 0.2         "ACT_VM_HELPINGHAND_RETRACT_LAYER" 1
//	$Sequence "item_extend" 				 a_it_ext	Fadein 0.2 	Fadeout 0 	        "ACT_VM_ITEMPICKUP_EXTEND" 1			Hidden
//	$Sequence "item_extend_layer" 			al_it_ext	Fadein 0.2 	Fadeout 0 	        "ACT_VM_ITEMPICKUP_EXTEND_LAYER" 1
//	$Sequence "item_loop"  					 a_it_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_ITEMPICKUP_LOOP" 1 				Hidden
//	$Sequence "item_loop_layer"  			al_it_idle	Fadein 0.2 	Fadeout 0.2 loop    "ACT_VM_ITEMPICKUP_LOOP_LAYER" 1
//	$Sequence "item_retract"  				 a_it_ret	Fadein 0 	Fadeout 0.2         "ACT_VM_ITEMPICKUP_RETRACT" 1 			Hidden
//	$Sequence "item_retract_layer"  		al_it_ret	Fadein 0	Fadeout 0.2         "ACT_VM_ITEMPICKUP_RETRACT_LAYER" 1
//Extending Hands End
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

//You could make a new collisionmodel. But hosting server would force its collisionmodel onto you.
//	$CollisionModel "explosive_box001_physics.smd"
//	{
//		$mass 20
//		$inertia 1
//		$damping 0
//		$rotdamping 3
//		$rootbone " "
//	}

// Don't edit any of these keyvalues.
$KeyValues
{
	prop_data
	{
		"base" "Wooden.FireworkCrate"
		"physicsmode" "1"
		"glow" "1"
	}
	physgun_interactions
	{
		"onbreak" "explode_fire"
		"onfirstimpact" "break"
	}
	fire_interactions
	{
		"flammable" "yes"
	}
	game_interactions
	{
		"weapon_collision" "yes"
	}
}
